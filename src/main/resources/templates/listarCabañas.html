<!DOCTYPE html>
<!--
Click nbfs://nbhost/SystemFileSystem/Templates/Licenses/license-default.txt to change this license
Click nbfs://nbhost/SystemFileSystem/Templates/Other/html.html to edit this template
-->
<html>
    <head>
        <title>TODO supply a title</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
    </head>
     <body>
        <header>
            <div class="nav-container">
                <div class="nav">
                    <ul>
                        <li><a href="/admin">Inicio</a></li>
                        <li><a href="/admin#servicios">Servicios</a></li>
                        <li><a href="/admin#nosotros">Nosotros</a></li>
                        <li><a href="/admin/usuarios">Ver Usuarios</a></li>
                         <div class="user-layer">
                          <h2 th:text="${nombreUsuario}"></h2>
                        <li><a href="/logout"><span class="logout-icon">Cerrar sesion</span></a></li>
                    </div>
                        
                    </ul>
                    
                </div>
            </div>
        </header>
        <section>
            <div class="hero">
                <div class="hero-title">Glamping Santa Helena</div>
                    <img src="https://th.bing.com/th/id/OIP.HSqB1HI7rn4Amo0_PW64VgHaE8?rs=1&pid=ImgDetMain" alt="background-img-section"/>
            </div> 
        </section>
        <main>
               <div class="main-container">
                   <button><a href="/admin/registrarCaba単as">Registrar caba単a</a></button>
                            <table>
                                <tr>
                                    <th>Id:</th>
                                    <th>Nombre:</th>
                                    <th>Capacidad:</th>
                                    <th>Imagen:</th>
                                    <th>Reserva:</th> 
                                    <th>Estado:</th>
                                    <th>Accion:</th>
                                    

                                </tr>
                                <tr th:each="cabania : ${listaCabanias}">
                                    <td th:text="${cabania.id}"></td>
                                    <td th:text="${cabania.nombre}"></td>
                                    <td th:text="${cabania.capacidad}"></td>
                                    <td>
                                        <div th:each="imagen : ${cabania.imagen}">
                                            <img th:src="${imagen.fileName}">
                                        </div>
                                    </td>
                                    
                                     <td>

                                        <span th:if="${#lists.isEmpty(cabania.reserva)}">No hay reservas realizadas</span>
                                        <span th:if="${not #lists.isEmpty(cabania.reserva)}">
                                            <span th:each="reserva, iterStat : ${cabania.reserva}">
                                                <span th:text="${reserva.fechaInicio} + ' - ' + ${reserva.fechaFinal} + ' - Usuario:  ' + ${reserva.usuario.username}"></span>
                                                <span th:if="${not iterStat.last}">, </span>
                                            </span>
                                        </span>
                                    </td>
                                    <td th:text="${cabania.estado == true} ? ' Activa ': 'Desactivada'"></td>
                                    <td>
                                        <form>
                                            <button id='editar' name="editar"><a th:href =" @{|/admin/cabania/editarCaba単a/${cabania.id}|}">Editar</a></button>
                                        </form>
                                        <form>
                                            <button id='editar' name="editar"><a th:href="@{|/admin/cabania/aniadirImagenes/${cabania.id}|}">A単adir/Quitar/Editar Imagenes</a></button>
                                        </form>
                                        <form th:action="@{|/admin/verCabanias/${cabania.id}|}" method="post" >
                                            <span th:if="${cabania.estado == true}">
                                            <button id="estado" name="estado" value="false">Estado</button>
                                            </span>
                                            <span th:unless="${cabania.estado == true}">
                                                <button id="estado" name="estado" value="true">Estado</button>
                                            </span>
                                        </form>
                                        <form>
                                            <button id='eliminar' name="eliminar">Eliminar</button>
                                        </form>
                                    </td>

                                </tr>


                            </table>
                        </div>
        </main>
        <section>
            <div class="footer-section"></div>
        </section>
        <footer>
            
        </footer>
    </body>
</html>
