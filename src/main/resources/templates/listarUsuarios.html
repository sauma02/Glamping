<!DOCTYPE html>
<!--
Click nbfs://nbhost/SystemFileSystem/Templates/Licenses/license-default.txt to change this license
Click nbfs://nbhost/SystemFileSystem/Templates/Other/html.html to edit this template
-->
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org">
    <head>
        <title>TODO supply a title</title>
        <meta charset="UTF-8">
            <meta name="viewport" content="width=device-width, initial-scale=1.0">
                <script th:src="@{/webjars/bootstrap/js/bootstrap.min.js}"></script>
                <link th:href="@{/webjars/bootstrap/css/bootstrap.min.css}" rel="stylesheet"/>
                </head>
                <body>
                    <header>
                        <div class="nav-container">
                            <div class="nav">
                                <ul>
                                    <li><a href="/admin">Inicio</a></li>
                                    <li><a href="/admin#servicios">Servicios</a></li>
                                    <li><a href="/admin/verCabanias">Ver Cabañas</a></li>
                                    <li><a href="/admin#nosotros">Nosotros</a></li>
                                    <div class="user-layer">
                                        <h2 th:text="${nombreUsuario}"></h2>
                                        <li><a href="/logout"><span class="logout-icon">Cerrar sesion</span></a></li>
                                    </div>
                                </ul>
                            </div>
                        </div>
                    </header>
                    <section>
                        <div class="hero">
                            <div class="hero-title">Glamping Santa Helena</div>
                            <img src="https://th.bing.com/th/id/OIP.HSqB1HI7rn4Amo0_PW64VgHaE8?rs=1&pid=ImgDetMain" alt="background-img-section"/>
                        </div> 
                    </section>
                    <main>
                        <div class="main-container">
                            <table>
                                <tr>
                                    <th>Id:</th>
                                    <th>Nombre:</th>
                                    <th>Email:</th>
                                    <th>Nombre de usuario:</th>
                                    <th>Contacto:</th>
                                    <th>Fecha de nacimiento:</th>
                                    <th>Contaco de emergencia:</th>
                                    <th>Nombre contacto de emergencia:</th>
                                    <th>Parentesco:</th>
                                    <th>Reserva:</th>
                                    <th>Rol:</th>
                                    <th>Acción:</th>

                                </tr>
                                <tr th:each="usuario : ${usuarios}">
                                    <td th:text="${usuario.id}"></td>
                                    <td th:text="${usuario.nombre}"></td>
                                    <td th:text="${usuario.email}"></td>
                                    <td th:text="${usuario.username}"> </td>
                                    <td th:text="${usuario.contacto}"></td>
                                    <td th:text="${usuario.fechaNacimiento}"></td>
                                    <td th:text="${usuario.contactoEmergencia}"></td>
                                    <td th:text="${usuario.nombreContactoEmergencia}"></td>
                                    <td th:text="${usuario.parentesco}"></td>
                                    <td>

                                        <span th:if="${#lists.isEmpty(usuario.reserva)}">No hay reservas realizadas</span>
                                        <span th:if="${not #lists.isEmpty(usuario.reserva)}">
                                            <span th:each="reserva, iterStat : ${usuario.reserva}">
                                                <span th:text="${reserva.fechaInicio} + ' - ' + ${reserva.fechaFinal} + ' - Cabaña: ' + ${reserva.cabania.nombre}"></span>
                                                <span th:if="${not iterStat.last}">, </span>
                                            </span>
                                        </span>
                                    </td>
                                    <td>
                                        <span th:if="${usuario.roles != null}">
                                            <span th:text="${usuario.roles.name}"></span>
                                        </span>
                                        <span th:unless="${usuario.roles != null}">No hay roles asignados</span>
                                    </td>
                                    <td>
                                        <form>
                                            <button id='editar' name="editar" ><a th:href="@{|/admin/usuarios/editarUsuario/${usuario.id}|}">Editar</a></button>
                                        </form>
                                        <form  method="post" action="">
                                            <button id="desactivar" name="desactivar">Estado</button>
                                        </form>
                                        <form>
                                            <button id='eliminar' name="eliminar">Eliminar</button>
                                        </form>
                                    </td>

                                </tr>


                            </table>
                        </div>
                    </main>
                    <section>
                        <div class="footer-section"></div>
                    </section>
                    <footer>

                    </footer>
                </body>
                </html>
